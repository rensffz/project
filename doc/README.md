# Урожай

## Цель проекта:

Разработка компьютерной игры, позволяющей игроку управлять персонажем и контролировать его действия.

## Мотивация:

Получить навыки создания программного продукта.

## Общие сведения:

Программа "Урожай" представляет собой компьютерную игру, реализующую управление персонажем и его передвижение.
Игра написана на языке Python с использованием библиотек pygame (для реализации графического интерфейса) и random (для выбора случайных значений в ходе игры, где это будет необходимо).

## Программа представлена следующими объектами:

    - модуль main.py - основной модуль игры;
    - модуль game.py - модуль, который определяет класс Game для управления игрой, инициализации игровых объектов и отрисовки экрана, а также функцию инициализации и главный игровой цикл;
    - модуль add.py - модуль, который определяет классы Resource, Life и Environment для дополнительных игровых объектов (ресурсов и жизней) и элементов экрана;
    - модуль characters.py - модуль, который определяет классы Main и Enemy для игровых персонажей и их поведения;
    - модуль sprites.py - модуль, который определяет класс Sprite для загрузки и хранения спрайтов игровых объектов;
    - модуль utils.py -  модуль, который содержит вспомогательные функции;
    - модуль constants.py - модуль, содержащий константы для игры;
    
    - папка assets, содержащая изображения игровых объектов в формате png и шрифт в формате ttf
    

## Функциональности проекта:

После запуска программы, перед началом игры пользователю предоставляется возможность прочитать инструкцию. Игроку будет предложено собрать определённое количество ресурсов за отведённое время, не столкнувшись с "врагом". Также игрок имеет фиксированное количество жизней, которое уменьшается при столкновении (после того, как исчезнет последняя, игра завершается с проигрышем).

С момента запуска игры (путём нажатия клавиши SPACE) начинается обратный отсчёт, а также игра автоматически реализует передвижение вражеских объектов по игровому полю. При столкновении игрока с одним из них, игра начинается заново, а количество оставшихся жизней уменьшается. Как только все жизни закончатся, игра завершается.

Пользователь может управлять персонажем за счёт нажатия стрелок или кнопок W, A, S, D. При нажатии пользователем одной из кнопок управления, программа проверяет, возможно ли передвинуть в указанном направлении персонажа, и, если это так, то делает это.
Программа проверяет, был ли собран ресурс (проверяя взаимное расположение по координатам) и, если это истинно, увеличивает счётчик собранных объектов. По достижении счётчиком возможного максимума игра завершается выигрышем пользователя.

Приложение должно предоставлять пользователю возможность наблюдать оставшееся время (в минутах и секундах), счёт и количество жизней.

После прохождения игры пользователю будет предложено начать игру заново.

## Сценарий использования программы:
1) 
 - Пользователь нажимает SPACE в начале игры -- программа запускается: начинается отсчёт таймера и передвижение "врагов", главный персонаж ставится в стартовую позицию (центр поля).
 
 - Пользователь нажимает SPACE в конце игры -- игра перезапускается и пользователю предоставляется возможность сыграть снова;

2)
 - Пользователь нажимает W ИЛИ стрелку вверх -- игра проверяет, не выходит ли персонаж за пределы игрового поля, и, если он не за границами, сдвигает персонажа вверх; игра проверяет по координатам, был ли собран ресурс, и, если это так, увеличивает счётчик собранных предметов; игра сравнивает счётчик с максимально возможным его значением - если они совпадают, игра завершается;
 

3) 
 - Пользователь нажимает A ИЛИ стрелку влево -- игра проверяет, не выходит ли персонаж за пределы игрового поля, и, если он не за границами, сдвигает персонажа влево; игра проверяет по координатам, был ли собран ресурс, и, если это так, увеличивает счётчик собранных предметов; игра сравнивает счётчик с максимально возможным его значением - если они совпадают, игра завершается;

4) 
 - Пользователь нажимает S ИЛИ стрелку вниз -- игра проверяет, не выходит ли персонаж за пределы игрового поля, и, если он не за границами, сдвигает персонажа вниз; игра проверяет по координатам, был ли собран ресурс, и, если это так, увеличивает счётчик собранных предметов; игра сравнивает счётчик с максимально возможным его значением - если они совпадают, игра завершается;

5) 
 - Пользователь нажимает D ИЛИ стрелку вправо -- игра проверяет, не выходит ли персонаж за пределы игрового поля, и, если он не за границами, сдвигает персонажа вправо; игра проверяет по координатам, был ли собран ресурс, и, если это так, увеличивает счётчик собранных предметов; игра сравнивает счётчик с максимально возможным его значением - если они совпадают, игра завершается.
 
 6) 
 - Пользователь сталкивается с вражеским персонажем -- главный герой перемещается в стартовую позицию, количество собранных предметов и прошедшее время остаются неизменными. Если в стартовой позиции находится враг, его положение изменяется. Количество жизней уменьшается на единицу. Если жизней не остаётся, игра завершается.
 
 7) 
 - Если пользователь выигрывает/проиграет, на экран выводится соответствующее сообщение. Игроку предлагается нажать SPACE для повторной игры. Также пользователь может закрыть игру, нажав кнопку "Закрыть". 

## Внутренняя структура приложения:

В реализации приложения использовались классы.  Класс Game - класс, атрибуты которого содержали в себе информацию о главных действующих персонажах игры (управляемый пользователем герой и его "враги"), дополнительных объектах (ресурс, жизни), состояниях, различных константах, влияющих на игровой процесс.
Класс Game определяется в модуле game.py, переменная-экземпляр создается в функции GameInit() того же модуля. 

### Подробнее о классе Game: 

**Атрибуты класса:**

- main: Main - главный игровой персонаж, управляемый пользователем; является экземпляром класса Main (определён в модуле _characters.py_); публичный атрибут, так как к нему часто идёт обращение извне.

- res: Resource - ресурс, который нужно будет собирать в течение игры; является экземпляром класса Resource (определён в модуле _add.py_); публичный атрибут, так как к нему часто идёт обращение извне.

- lives: list(Life) - список экземпляров объектов класса Life (определён в модуле _add.py_) - жизней; публичный атрибут, так как к нему часто идёт обращение извне.

- enemies: list(Enemy) - список экземпляров объектов класса Enemy (определён в модуле _characters.py_) - вражеских объектов; публичный атрибут, так как к нему часто идёт обращение извне.

- time: int - начальное время; имеет целочисленный тип и первоначально равно значению start_time, взятому из модуля _constants.py_; публичный атрибут, так как к нему часто идёт обращение извне.

- score: int - счёт игры; имеет целочисленный тип, изначально равен нулю и увеличивается на единицу каждый раз, когда игрок собирает ресурс; публичный атрибут, так как к нему часто идёт обращение извне.

- lives_count: int - количество оставшихся жизней; имеет целочисленный тип и изначально устанавливается значение, равное lives_count, взятое из модуля _constants.py_; публичный атрибут, так как к нему часто идёт обращение извне.

- state: int - состояние игры; имеет целочисленный тип и может быть равно одному из трёх значений:
                0 - стартовое положение
                1 - основной процесс
                2 - конец

публичный атрибут, так как к нему часто идёт обращение извне.

- result: int - переменная результата игры; при запуске игры равна 0, при поражении устанавливается в значение -1, при победе приравнивается к единице; публичный атрибут, так как к нему часто идёт обращение извне.


- screen: Surface - экран, на котором отрисовываются все объекты; отсутствует изначально и добавляется после создания игровой переменной в функции GameInit(); публичный атрибут, так как к нему часто идёт обращение извне.

- font: Font - устанавливает шрифт, используемый в игре, и его размер (которые, в свою очередь, описаны в модуле _constants.py_); отсутствует изначально и добавляется после создания игровой переменной в функции GameInit(); публичный атрибут, так как к нему часто идёт обращение извне.

- timer: Clock - переменная, позволяющая в дальнейшем установить tick для задержки; отсутствует изначально и добавляется после создания игровой переменной в функции GameInit(); публичный атрибут, так как к нему часто идёт обращение извне.

**Методы класса:**

restart() - перемещает игрового персонажа в начальную позицию, генерирует заново списки врагов и жизней, устанавливает таймер в начальное время, обнуляет счёт, восстанавливает количество жизней и устанавливает атрибут, показывающий состояние, равным единице (т. к. требуется запустить основной игровой цикл)
